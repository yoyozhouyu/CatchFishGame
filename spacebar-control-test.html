<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>空格键控制测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .test-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .control-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .demo-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .demo-card h3 {
            color: #4CAF50;
            margin-bottom: 15px;
        }

        .key-display {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-size: 18px;
            font-weight: bold;
        }

        .status-indicator {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }

        .status-shoot {
            background: rgba(244, 67, 54, 0.3);
            border-left: 4px solid #f44336;
        }

        .status-pull {
            background: rgba(255, 193, 7, 0.3);
            border-left: 4px solid #ffc107;
        }

        .status-inactive {
            background: rgba(158, 158, 158, 0.3);
            border-left: 4px solid #9e9e9e;
        }

        .back-link {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .instruction {
            background: rgba(33, 150, 243, 0.2);
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-list li:before {
            content: "✅ ";
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="demo.html" class="back-link">← 返回演示页面</a>
        
        <h1>⌨️ 空格键控制测试</h1>
        
        <div class="instruction">
            <h3>📋 功能说明</h3>
            <p>空格键现在具有双重功能：</p>
            <ul class="feature-list">
                <li>没有鱼线时：用于射击鱼枪</li>
                <li>有鱼线时：用于拉拽鱼线</li>
                <li>智能切换：根据游戏状态自动判断功能</li>
                <li>统一操作：一个按键完成射击和拉拽</li>
            </ul>
        </div>

        <div class="control-demo">
            <div class="demo-card">
                <h3>🎯 射击模式</h3>
                <div class="key-display">空格键</div>
                <div class="status-indicator status-shoot" id="shootStatus">
                    射击功能：激活
                </div>
                <p>当没有鱼线连接时，空格键用于发射鱼枪。</p>
            </div>

            <div class="demo-card">
                <h3>🎣 拉拽模式</h3>
                <div class="key-display">空格键</div>
                <div class="status-indicator status-inactive" id="pullStatus">
                    拉拽功能：等待鱼线
                </div>
                <p>当击中鱼类后，空格键自动切换为拉拽功能。</p>
            </div>
        </div>

        <div class="test-section">
            <h2>🎮 实际测试</h2>
            <p>点击下方链接进入实际游戏测试空格键的双重功能：</p>
            
            <div style="text-align: center; margin: 20px 0;">
                <a href="pull-system-test.html" class="back-link" style="margin: 10px;">🎣 拉拽系统测试</a>
                <a href="index.html" class="back-link" style="margin: 10px;">🎮 完整游戏</a>
            </div>
        </div>

        <div class="test-section">
            <h2>📖 操作指南</h2>
            
            <h3>🎯 射击阶段</h3>
            <ol>
                <li>使用WASD键移动潜水员</li>
                <li>用鼠标瞄准目标鱼类</li>
                <li>按空格键发射鱼枪</li>
                <li>观察鱼枪飞行轨迹</li>
            </ol>

            <h3>🎣 拉拽阶段</h3>
            <ol>
                <li>成功击中鱼类后，鱼线自动连接</li>
                <li>屏幕显示"按住空格键拉拽鱼线"提示</li>
                <li>按住空格键开始拉拽</li>
                <li>观察体力消耗和鱼线张力</li>
                <li>松开空格键停止拉拽</li>
            </ol>

            <h3>⚡ 高级技巧</h3>
            <ul class="feature-list">
                <li>间歇性拉拽可以节省体力</li>
                <li>观察鱼类体力，体力低时更容易拉拽</li>
                <li>注意鱼线张力，过高会导致断线</li>
                <li>鱼游远时鱼线会自动拉长</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>🔧 技术细节</h2>
            <p><strong>智能按键切换逻辑：</strong></p>
            <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 5px; overflow-x: auto;">
if (空格键按下) {
    if (有鱼线 && 鱼线未断裂) {
        执行拉拽功能();
        消耗玩家体力();
        对鱼施加拉拽力();
    } else {
        执行射击功能();
        发射鱼枪();
    }
}</pre>
        </div>
    </div>

    <script>
        // 模拟状态更新
        let hasLine = false;
        
        function updateStatus() {
            const shootStatus = document.getElementById('shootStatus');
            const pullStatus = document.getElementById('pullStatus');
            
            if (hasLine) {
                shootStatus.className = 'status-indicator status-inactive';
                shootStatus.textContent = '射击功能：待机';
                
                pullStatus.className = 'status-indicator status-pull';
                pullStatus.textContent = '拉拽功能：激活';
            } else {
                shootStatus.className = 'status-indicator status-shoot';
                shootStatus.textContent = '射击功能：激活';
                
                pullStatus.className = 'status-indicator status-inactive';
                pullStatus.textContent = '拉拽功能：等待鱼线';
            }
        }
        
        // 模拟状态切换
        setInterval(() => {
            hasLine = !hasLine;
            updateStatus();
        }, 3000);
        
        // 键盘事件监听
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (hasLine) {
                    console.log('空格键：拉拽鱼线');
                } else {
                    console.log('空格键：射击鱼枪');
                }
            }
        });
        
        // 初始化
        updateStatus();
    </script>
</body>
</html>
